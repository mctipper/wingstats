(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))e(t);new MutationObserver(t=>{for(const c of t)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&e(d)}).observe(document,{childList:!0,subtree:!0});function n(t){const c={};return t.integrity&&(c.integrity=t.integrity),t.referrerPolicy&&(c.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?c.credentials="include":t.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function e(t){if(t.ep)return;t.ep=!0;const c=n(t);fetch(t.href,c)}})();const u=["invertebrate","seed","fish","fruit","rodent","nectar"],g={dieType:"base",faces:["invertebrate","seed","fish","fruit","rodent",["invertebrate","seed"]]},F={dieType:"oceania",faces:["invertebrate",["nectar","seed"],"fish",["nectar","fruit"],"rodent",["invertebrate","seed"]]},m=[g,F],w={rerollWhenAllEqual:!0},i={die:g,dieCount:3,selectedFoods:new Set,availableFoods:new Set,advancedOptions:w};function b(){const o=document.getElementById("dice-control"),s=document.createElement("div");s.className="dice-row";const n=document.createElement("button");n.textContent="<";const e=document.createElement("div");e.id="dice-images";const t=document.createElement("button");t.textContent=">",s.appendChild(n),s.appendChild(e),s.appendChild(t);const c=document.createElement("div");c.id="die-count";function d(){c.textContent=`${i.dieCount} ${i.dieCount===1?"die":"dice"}`,L(i.dieCount,e),f()}return n.addEventListener("click",()=>{i.dieCount>1&&(i.dieCount--,d())}),t.addEventListener("click",()=>{i.dieCount<5&&(i.dieCount++,d())}),o.appendChild(s),o.appendChild(c),d(),o}function L(o,s){s.innerHTML="",s.className="dice-line";for(let n=0;n<o;n++){const e=document.createElement("img");e.src="/wingstats/assets/images/die.png",e.alt=`Die ${n+1}`,e.className="die",s.appendChild(e)}}function x(){const o=document.getElementById("target-food-control");if(!o)throw new Error("target-food-control container not found in DOM");return o.innerHTML="",o.className="food-line",u.forEach(n=>{const e=document.createElement("div");e.className="food-item-wrapper",e.dataset.food=n;const t=document.createElement("img");t.src=`/wingstats/assets/images/${n}.png`,t.alt=n,t.className="food";const c=document.createElement("span");c.textContent=n,c.className="food-name-text",c.style.display="none",t.addEventListener("click",()=>{i.availableFoods.has(n)&&(i.selectedFoods.has(n)?(i.selectedFoods.delete(n),t.src=`/wingstats/assets/images/${n}.png`,t.classList.remove("selected")):(i.selectedFoods.add(n),t.src=`/wingstats/assets/images/${n}-glow.png`,t.classList.add("selected")),h(o))}),e.appendChild(t),e.appendChild(c),o.appendChild(e)}),v(o),o}function h(o){o.querySelectorAll(".food-item-wrapper").forEach(n=>{const e=n.querySelector(".food"),t=n.querySelector(".food-name-text");if(!e||!t)return;const c=e.alt;i.availableFoods.has(c)?(e.classList.remove("disabled"),e.style.opacity="",e.style.pointerEvents="",e.classList.remove("selected","unselected")):(e.classList.add("disabled"),e.style.opacity="0.4",e.style.pointerEvents="none",e.classList.remove("selected","unselected")),i.selectedFoods.size===0?(e.classList.remove("selected","unselected"),t.style.display="none"):i.selectedFoods.has(c)?(e.classList.add("selected"),e.classList.remove("unselected"),t.style.display="block"):(e.classList.add("unselected"),e.classList.remove("selected"),t.style.display="none")}),f()}function v(o){i.selectedFoods=new Set,h(o)}function $(o,s,n,e){const t=Array.isArray(n)?n:[n];if(s===0||n.length===0)return y(0);const d=o.faces.filter(r=>(Array.isArray(r)?r:[r]).some(a=>t.includes(a))).length/o.faces.length;let p=1-Math.pow(1-d,s);if(s===5&&e){const l=o.faces.filter(a=>(Array.isArray(a)?a:[a]).every(E=>!t.includes(E))).length/Math.pow(o.faces.length,s);p=1-(Math.pow(1-d,s)-l)}return y(p)}function y(o){const s=o*100;if(s===0)return"0%";if(s>=.1)return`${s.toFixed(2)}%`;let n=3,e=s.toFixed(n);for(;parseFloat(e)===0&&n<20;)n++,e=s.toFixed(n);return`${e}%`}function C(o){return`${o[0].toUpperCase()}${o.slice(1)}`}function f(){const o=document.getElementById("results");if(!o)throw new Error("results container not found in DOM");o.innerHTML="";const s=u.filter(t=>i.selectedFoods.has(t)),n=document.createElement("div");n.textContent=`Die: ${C(i.die.dieType)}, Dice: ${i.dieCount}, Foods: ${s.join(", ")||"none"}`;const e=document.createElement("div");e.textContent=`Probability: ${$(i.die,i.dieCount,s,i.advancedOptions.rerollWhenAllEqual)}`,o.appendChild(n),o.appendChild(e)}function S(){const o=document.getElementById("dice-type-control"),s=document.createElement("div");s.className="dice-type-row";const n=document.createElement("button");n.textContent="<";const e=document.createElement("div");e.className="dice-type-line",e.id="die-type";const t=document.createElement("button");t.textContent=">",s.appendChild(n),s.appendChild(e),s.appendChild(t);function c(){e.textContent=`${C(i.die.dieType)} Dice`,T(i.die),f()}function d(){const r=(m.findIndex(l=>l.dieType===i.die.dieType)+1)%m.length;i.die=m[r],c()}return n.addEventListener("click",d),t.addEventListener("click",d),o.appendChild(s),c(),o}function T(o){i.die=o,o.dieType==="base"?i.availableFoods=new Set(u.filter(n=>n!=="nectar")):i.availableFoods=new Set(u);const s=document.getElementById("target-food-control");s&&v(s)}console.log("App version: 0.1.0");const D=document.getElementById("layout-root");D&&(S(),b(),x());
