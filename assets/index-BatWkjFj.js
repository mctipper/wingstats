(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))e(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const d of i.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&e(d)}).observe(document,{childList:!0,subtree:!0});function t(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function e(s){if(s.ep)return;s.ep=!0;const i=t(s);fetch(s.href,i)}})();const u=["invertebrate","seed","fish","fruit","rodent","nectar"],g={dieType:"base",faces:["invertebrate","seed","fish","fruit","rodent",["invertebrate","seed"]]},b={dieType:"oceania",faces:["invertebrate",["nectar","seed"],"fish",["nectar","fruit"],"rodent",["invertebrate","seed"]]},f=[g,b],w={rerollWhenAllEqual:!0},c={die:g,dieCount:3,selectedFoods:new Set,availableFoods:new Set,advancedOptions:w};function F(){const n=document.getElementById("dice-control"),o=document.createElement("div");o.className="dice-row";const t=document.createElement("button");t.textContent="<";const e=document.createElement("div");e.id="dice-images";const s=document.createElement("button");s.textContent=">",o.appendChild(t),o.appendChild(e),o.appendChild(s);const i=document.createElement("div");i.id="die-count";function d(){i.textContent=`${c.dieCount} ${c.dieCount===1?"die":"dice"}`,L(c.dieCount,e),m()}return t.addEventListener("click",()=>{c.dieCount>1&&(c.dieCount--,d())}),s.addEventListener("click",()=>{c.dieCount<5&&(c.dieCount++,d())}),n.appendChild(o),n.appendChild(i),d(),n}function L(n,o){o.innerHTML="",o.className="dice-line";for(let t=0;t<n;t++){const e=document.createElement("img");e.src="/wingstats/assets/images/die.png",e.alt=`Die ${t+1}`,e.className="die",o.appendChild(e)}}function $(){const n=document.getElementById("target-food-control");if(!n)throw new Error("target-food-control container not found in DOM");return n.innerHTML="",n.className="food-line",u.forEach(t=>{const e=document.createElement("div");e.className="food-item-wrapper",e.dataset.food=t;const s=document.createElement("img");s.src=`/wingstats/assets/images/${t}.png`,s.alt=t,s.className="food";const i=document.createElement("span");i.textContent=t,i.className="food-name-text",i.style.display="none",s.addEventListener("click",()=>{c.availableFoods.has(t)&&(c.selectedFoods.has(t)?c.selectedFoods.delete(t):c.selectedFoods.add(t),h(n))}),e.appendChild(s),e.appendChild(i),n.appendChild(e)}),v(n),n}function h(n){n.querySelectorAll(".food-item-wrapper").forEach(t=>{const e=t.querySelector(".food"),s=t.querySelector(".food-name-text");if(!e||!s)return;const i=e.alt;c.availableFoods.has(i)?(e.classList.remove("disabled"),e.style.opacity="",e.style.pointerEvents="",e.classList.remove("selected","unselected")):(e.classList.add("disabled"),e.style.opacity="0.4",e.style.pointerEvents="none",e.classList.remove("selected","unselected")),c.selectedFoods.size===0?(e.classList.remove("selected","unselected"),e.src=`/wingstats/assets/images/${i}.png`,s.style.display="none"):c.selectedFoods.has(i)?(e.classList.add("selected"),e.classList.remove("unselected"),e.src=`/wingstats/assets/images/${i}-glow.png`,s.style.display="block"):(e.classList.add("unselected"),e.classList.remove("selected"),e.src=`/wingstats/assets/images/${i}.png`,s.style.display="none")}),m()}function v(n){c.selectedFoods=new Set,h(n)}function x(n,o,t,e){const s=Array.isArray(t)?t:[t];if(o===0||t.length===0)return y(0);const d=n.faces.filter(r=>(Array.isArray(r)?r:[r]).some(a=>s.includes(a))).length/n.faces.length;let p=1-Math.pow(1-d,o);if(o===5&&e){const l=n.faces.filter(a=>(Array.isArray(a)?a:[a]).every(E=>!s.includes(E))).length/Math.pow(n.faces.length,o);p=1-(Math.pow(1-d,o)-l)}return y(p)}function y(n){const o=n*100;if(o===0)return"0%";if(o>=.1)return`${o.toFixed(2)}%`;let t=3,e=o.toFixed(t);for(;parseFloat(e)===0&&t<20;)t++,e=o.toFixed(t);return`${e}%`}function C(n){return`${n[0].toUpperCase()}${n.slice(1)}`}function m(){const n=document.getElementById("results");if(!n)throw new Error("results container not found in DOM");n.innerHTML="";const o=u.filter(s=>c.selectedFoods.has(s)),t=document.createElement("div");t.textContent=`Rolling ${c.dieCount} ${C(c.die.dieType)} Di${c.dieCount===1?"":"c"}e targeting: ${o.join(", ")||"none"}`;const e=document.createElement("div");e.className="probability-div",e.textContent=`Probability: ${x(c.die,c.dieCount,o,c.advancedOptions.rerollWhenAllEqual)}`,n.appendChild(t),n.appendChild(e)}function S(){const n=document.getElementById("dice-type-control"),o=document.createElement("div");o.className="dice-type-row";const t=document.createElement("button");t.textContent="<";const e=document.createElement("div");e.className="dice-type-line",e.id="die-type";const s=document.createElement("button");s.textContent=">",o.appendChild(t),o.appendChild(e),o.appendChild(s);function i(){e.textContent=`${C(c.die.dieType)} Dice`,T(c.die),m()}function d(){const r=(f.findIndex(l=>l.dieType===c.die.dieType)+1)%f.length;c.die=f[r],i()}return t.addEventListener("click",d),s.addEventListener("click",d),n.appendChild(o),i(),n}function T(n){c.die=n,n.dieType==="base"?c.availableFoods=new Set(u.filter(t=>t!=="nectar")):c.availableFoods=new Set(u);const o=document.getElementById("target-food-control");o&&v(o)}console.log("App version: 0.1.0");const N=document.getElementById("layout-root");N&&(S(),F(),$());
